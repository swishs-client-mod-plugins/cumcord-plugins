(function(m,u,a){"use strict";function y(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var r=y(m);const i=[];var s={patch:e=>e&&i.push(e),unpatchAll:()=>i.forEach(e=>e()),lazyPatchContextMenu:async(e,n)=>{const t=l=>l.default&&l.default.displayName===e,o=a.find(t);if(o)n(o);else{const l=a.findByProps("openContextMenuLazy");let x=u.before("openContextMenuLazy",l,c=>{const z=c[1];return c[1]=async()=>{const B=await z(c[0]);return C=>{const f=B(C);return f?.type?.displayName===e&&n&&(x(),n(a.find(t)),n=!1),f}},c})}}};const M=a.findByDisplayName("ImageModal"),h=a.findByDisplayName("MaskedLink"),d=a.findByProps("MenuGroup","MenuItem"),g=a.findByProps("ModalCloseButton"),{downloadLink:P}=a.findByProps("downloadLink"),{openModal:E}=a.findByProps("openModal","openModalLazy"),p=e=>`${e.substring(0,e.lastIndexOf("."))}.png?size=1024`;var L=()=>({onLoad(){["DMUserContextMenu","GuildChannelUserContextMenu"].map(e=>{s.lazyPatchContextMenu(e,n=>{s.patch(u.after("default",n,([t],o)=>{o?.props?.children?.props?.children?.splice(2,0,r.createElement(r.Fragment,null,r.createElement(d.MenuSeparator,null),r.createElement(d.MenuItem,{label:"Enlarge PFP",id:"enlarge",action:()=>{E(l=>r.createElement(g.ModalRoot,{transitionState:l.transitionState,size:"medium"},r.createElement(M,{height:1024,width:1024,src:p(t.user.getAvatarURL())}),r.createElement(h,{className:P,href:p(t.user.getAvatarURL())},"Open original")))}})))}))})})},onUnload(){s.unpatchAll()}});return L})(cumcord.modules.common.React,cumcord.patcher,cumcord.modules.webpack);
