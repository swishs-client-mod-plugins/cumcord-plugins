(function(v,e,u,g,n,C){"use strict";function G(s){if(s&&s.__esModule)return s;var r=Object.create(null);return s&&Object.keys(s).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return s[t]}})}}),r.default=s,Object.freeze(r)}var d=G(v);const f=[];var i={patch:s=>s&&f.push(s),unpatchAll:()=>f.forEach(s=>s())};const{colorStatusRed:E}=n.findByProps("colorStatusRed"),M=n.findByDisplayName("Text"),B=n.findByDisplayName("FormText"),c=n.findByDisplayName("SwitchItem");var P=()=>(C.useNest(e.persist),d.createElement(d.Fragment,null,d.createElement(c,{note:"Delete messages (if you can) when you hold delete and clock on them.",onChange:()=>e.persist.store.deleteMessages=!e.persist.ghost.deleteMessages,value:e.persist.ghost.deleteMessages},"Delete Messages"),d.createElement(c,{note:"Delete all channel types when you hold delete and click on them.",onChange:()=>e.persist.store.deleteChannels=!e.persist.ghost.deleteChannels,value:e.persist.ghost.deleteChannels},"Delete Channels"),d.createElement(c,{note:"Close direct message channels when you hold delete and click on them.",onChange:()=>e.persist.store.closeDMs=!e.persist.ghost.closeDMs,value:e.persist.ghost.closeDMs},"Close DMs"),d.createElement(c,{note:"Will leave guilds when you hold down delete and click on them.",onChange:()=>e.persist.store.leaveGuilds=!e.persist.ghost.leaveGuilds,value:e.persist.ghost.leaveGuilds},"Leave Guilds"),d.createElement(c,{note:"Delete roles in the role menu when you hold delete and click on them.",onChange:()=>e.persist.store.deleteRoles=!e.persist.ghost.deleteRoles,value:e.persist.ghost.deleteRoles},"Delete Roles"),d.createElement(c,{note:d.createElement(B,{type:"description"},d.createElement(M,{tag:"span",style:{fontWeight:"bold"},color:E},"WARNING:"," "),"no confirmation will be asked for, I would recommend leaving this off."),onChange:()=>e.persist.store.deleteGuilds=!e.persist.ghost.deleteGuilds,value:e.persist.ghost.deleteGuilds,disabled:!e.persist.ghost.leaveGuilds},"Delete Guilds")));const R=()=>{if(!e.persist.ghost.deleteMessages)return;const s=n.findByProps("canManageUser"),{deleteMessage:r}=n.findByProps("deleteMessage"),{getCurrentUser:t}=n.findByProps("getCurrentUser"),o=n.find(l=>l.default?.displayName==="Message");return u.after("default",o,([l],a)=>{if(!l?.childrenAccessories?.props||!a?.props)return a;const y=l.childrenAccessories.props.message,p=l.childrenAccessories.props.channel,_=s.can(g.constants.Permissions.MANAGE_MESSAGES,p),j=t().id===y?.author?.id;a.props.children.props.onClick=()=>{!h||!(_||j)||r(p.id,y.id)}})},A=()=>{if(!e.persist.ghost.closeDMs&&!e.persist.ghost.deleteChannels)return;const{deleteChannel:s}=n.findByProps("deleteChannel"),r=n.findByProps("selectChannel");return u.instead("selectChannel",r,(t,o)=>{if(t[0]==="@me"&&!e.persist.ghost.closeDMs)return o(...t);if(t[0]!=="@me"&&!e.persist.ghost.deleteChannels)return o(...t);if(!h)return o(...t);s(t[1])})},N=()=>{if(!e.persist.ghost.deleteChannels)return;const{deleteChannel:s}=n.findByProps("deleteChannel"),r=n.findByProps("selectVoiceChannel");return u.instead("selectVoiceChannel",r,(t,o)=>{if(!h)return o(...t);s(t[0])})},S=()=>{if(!e.persist.ghost.leaveGuilds)return;const{leaveGuild:s,deleteGuild:r}=n.findByProps("leaveGuild"),{getGuild:t}=n.findByProps("getGuild"),o=n.findByProps("selectGuild");return u.instead("selectGuild",o,([l],a)=>{if(!h)return a(...l);s(l).catch(()=>!e.persist.ghost.deleteGuilds||r(l,t(l).name))})},L=()=>{if(!e.persist.ghost.deleteRoles)return;const{deleteRole:s}=n.findByProps("deleteRole"),{getGuildId:r}=n.findByProps("getGuildId"),t=n.findByProps("selectRole");return u.instead("selectRole",t,(o,l)=>{if(!h)return l(...o);s(r(),o[0])})};let h;const m=s=>s.key==="Delete"&&(h=s.type==="keydown");var O=()=>({onLoad(){document.addEventListener("keydown",m),document.addEventListener("keyup",m),i.patch(R()),i.patch(A()),i.patch(N()),i.patch(S()),i.patch(L())},onUnload(){document.removeEventListener("keydown",m),document.removeEventListener("keyup",m),i.unpatchAll()},settings:d.createElement(P,null)});return O})(cumcord.modules.common.React,cumcord.pluginData,cumcord.patcher,cumcord.modules.common,cumcord.modules.webpack,cumcord.utils);
